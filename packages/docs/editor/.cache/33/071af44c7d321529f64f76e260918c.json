{"id":"E1EV","dependencies":[{"name":"/Users/krystian/Projects/OpenSource/neft/packages/docs/editor/package.json","includedInParent":true,"mtime":1560887740812},{"name":"/Users/krystian/Projects/OpenSource/neft/node_modules/@neft/core/package.json","includedInParent":true,"mtime":1560870718517},{"name":"../log","loc":{"line":1,"column":20},"parent":"/Users/krystian/Projects/OpenSource/neft/node_modules/@neft/core/src/document/use.js","resolved":"/Users/krystian/Projects/OpenSource/neft/node_modules/@neft/core/src/log/index.litcoffee"},{"name":"../assert","loc":{"line":2,"column":23},"parent":"/Users/krystian/Projects/OpenSource/neft/node_modules/@neft/core/src/document/use.js","resolved":"/Users/krystian/Projects/OpenSource/neft/node_modules/@neft/core/src/assert/index.litcoffee"},{"name":"../event-loop","loc":{"line":3,"column":26},"parent":"/Users/krystian/Projects/OpenSource/neft/node_modules/@neft/core/src/document/use.js","resolved":"/Users/krystian/Projects/OpenSource/neft/node_modules/@neft/core/src/event-loop/index.coffee"}],"generated":{"js":"const e=require(\"../log\"),t=require(\"../assert\"),n=require(\"../event-loop\");class i{constructor(e,t){this.document=e,this.element=e.element.getChildByAccessPath(t),this.name=\"\",this.refName=\"\",this.component=null,this.hiddenDepth=0,this.immediateRenderPending=!1,this.onElementPropsChange=this.element.onPropsChange.asSignalDispatcher(),this.element.onPropsChange.connect(this.handleElementPropsChange,this);let n=this.element;for(;n;)\"n-if\"in n.props&&n.onVisibleChange.connect(this.handleElementVisibleChange,this),n=n.parent}handleElementVisibleChange(e){const t=!e?-1:1;this.hiddenDepth+=t,this.document.rendered&&!this.component&&0===this.hiddenDepth?this.renderImmediate():this.document.rendered&&this.component&&this.hiddenDepth>0&&this.revert()}handleElementPropsChange(e){\"n-component\"===e&&this.document.rendered&&(this.revert(),this.renderImmediate())}renderImmediate(){this.immediateRenderPending||(this.immediateRenderPending=!0,n.setImmediate(()=>{this.immediateRenderPending=!1,this.document.rendered&&!this.component&&this.render()}))}render(){if(t.notOk(this.component,\"<n-use /> is already rendered\"),this.hiddenDepth>0)return;const n=this.element.props[\"n-component\"];if(!n)return;const i=this.document.getComponent(n);i?(i.render({context:this.document.context,props:this.element.props,onPropsChange:this.onElementPropsChange,sourceElement:this.element}),i.element.parent=this.element,this.name=n,this.refName=this.element.props[\"n-ref\"]||this.element.props.ref,this.component=i,this.refName&&this.document.setRef(this.refName,i.exported)):e.warning(`Cannot find ${n} component to render`)}revert(){this.component&&(this.component.revert(),this.component.element.parent=null,this.document.returnComponent(this.name,this.component),this.refName&&this.document.deleteRef(this.refName),this.name=\"\",this.refName=\"\",this.component=null)}}module.exports=i;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":1,"column":0},"generated":{"line":1,"column":6}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":1,"column":0},"generated":{"line":1,"column":8}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":1,"column":0},"generated":{"line":1,"column":16}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":2,"column":0},"generated":{"line":1,"column":26}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":2,"column":0},"generated":{"line":1,"column":28}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":2,"column":0},"generated":{"line":1,"column":36}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":3,"column":0},"generated":{"line":1,"column":49}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":3,"column":0},"generated":{"line":1,"column":51}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":3,"column":0},"generated":{"line":1,"column":59}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":5,"column":0},"generated":{"line":1,"column":76}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":5,"column":0},"generated":{"line":1,"column":82}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":6,"column":0},"generated":{"line":1,"column":84}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":6,"column":0},"generated":{"line":1,"column":96}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":6,"column":0},"generated":{"line":1,"column":98}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":7,"column":0},"generated":{"line":1,"column":101}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":7,"column":0},"generated":{"line":1,"column":106}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":7,"column":0},"generated":{"line":1,"column":115}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":8,"column":0},"generated":{"line":1,"column":117}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":8,"column":0},"generated":{"line":1,"column":122}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":8,"column":0},"generated":{"line":1,"column":130}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":8,"column":0},"generated":{"line":1,"column":132}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":8,"column":0},"generated":{"line":1,"column":140}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":8,"column":0},"generated":{"line":1,"column":161}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":10,"column":0},"generated":{"line":1,"column":164}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":10,"column":0},"generated":{"line":1,"column":169}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":10,"column":0},"generated":{"line":1,"column":174}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":11,"column":0},"generated":{"line":1,"column":177}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":11,"column":0},"generated":{"line":1,"column":182}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":11,"column":0},"generated":{"line":1,"column":190}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":12,"column":0},"generated":{"line":1,"column":193}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":12,"column":0},"generated":{"line":1,"column":198}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":12,"column":0},"generated":{"line":1,"column":208}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":14,"column":0},"generated":{"line":1,"column":213}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":14,"column":0},"generated":{"line":1,"column":218}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":14,"column":0},"generated":{"line":1,"column":230}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":15,"column":0},"generated":{"line":1,"column":232}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":15,"column":0},"generated":{"line":1,"column":237}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":15,"column":0},"generated":{"line":1,"column":261}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":16,"column":0},"generated":{"line":1,"column":263}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":16,"column":0},"generated":{"line":1,"column":268}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":16,"column":0},"generated":{"line":1,"column":289}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":16,"column":0},"generated":{"line":1,"column":294}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":16,"column":0},"generated":{"line":1,"column":302}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":16,"column":0},"generated":{"line":1,"column":316}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":18,"column":0},"generated":{"line":1,"column":337}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":18,"column":0},"generated":{"line":1,"column":342}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":18,"column":0},"generated":{"line":1,"column":350}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":18,"column":0},"generated":{"line":1,"column":364}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":18,"column":0},"generated":{"line":1,"column":372}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":18,"column":0},"generated":{"line":1,"column":377}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":18,"column":0},"generated":{"line":1,"column":402}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":20,"column":0},"generated":{"line":1,"column":408}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":20,"column":0},"generated":{"line":1,"column":412}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":20,"column":0},"generated":{"line":1,"column":414}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":20,"column":0},"generated":{"line":1,"column":419}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":21,"column":0},"generated":{"line":1,"column":427}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":21,"column":0},"generated":{"line":1,"column":432}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":22,"column":0},"generated":{"line":1,"column":435}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":22,"column":0},"generated":{"line":1,"column":444}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":22,"column":0},"generated":{"line":1,"column":446}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":23,"column":0},"generated":{"line":1,"column":453}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":23,"column":0},"generated":{"line":1,"column":455}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":23,"column":0},"generated":{"line":1,"column":471}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":23,"column":0},"generated":{"line":1,"column":479}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":23,"column":0},"generated":{"line":1,"column":484}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":23,"column":0},"generated":{"line":1,"column":511}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":25,"column":0},"generated":{"line":1,"column":517}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":25,"column":0},"generated":{"line":1,"column":519}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":25,"column":0},"generated":{"line":1,"column":521}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":29,"column":0},"generated":{"line":1,"column":528}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":29,"column":0},"generated":{"line":1,"column":555}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":30,"column":0},"generated":{"line":1,"column":558}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":31,"column":0},"generated":{"line":1,"column":564}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":30,"column":0},"generated":{"line":1,"column":567}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":31,"column":0},"generated":{"line":1,"column":570}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":31,"column":0},"generated":{"line":1,"column":572}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":32,"column":0},"generated":{"line":1,"column":574}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":32,"column":0},"generated":{"line":1,"column":579}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":32,"column":0},"generated":{"line":1,"column":592}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":33,"column":0},"generated":{"line":1,"column":594}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":33,"column":0},"generated":{"line":1,"column":599}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":33,"column":0},"generated":{"line":1,"column":608}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":33,"column":0},"generated":{"line":1,"column":619}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":33,"column":0},"generated":{"line":1,"column":624}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":33,"column":0},"generated":{"line":1,"column":635}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":33,"column":0},"generated":{"line":1,"column":639}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":33,"column":0},"generated":{"line":1,"column":644}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":34,"column":0},"generated":{"line":1,"column":656}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":34,"column":0},"generated":{"line":1,"column":661}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":35,"column":0},"generated":{"line":1,"column":679}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":35,"column":0},"generated":{"line":1,"column":684}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":35,"column":0},"generated":{"line":1,"column":693}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":35,"column":0},"generated":{"line":1,"column":703}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":35,"column":0},"generated":{"line":1,"column":708}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":35,"column":0},"generated":{"line":1,"column":719}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":35,"column":0},"generated":{"line":1,"column":724}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":35,"column":0},"generated":{"line":1,"column":736}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":36,"column":0},"generated":{"line":1,"column":739}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":36,"column":0},"generated":{"line":1,"column":744}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":40,"column":0},"generated":{"line":1,"column":753}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":40,"column":0},"generated":{"line":1,"column":778}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":41,"column":0},"generated":{"line":1,"column":781}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":41,"column":0},"generated":{"line":1,"column":797}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":42,"column":0},"generated":{"line":1,"column":800}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":42,"column":0},"generated":{"line":1,"column":805}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":42,"column":0},"generated":{"line":1,"column":814}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":43,"column":0},"generated":{"line":1,"column":825}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":43,"column":0},"generated":{"line":1,"column":830}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":44,"column":0},"generated":{"line":1,"column":839}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":44,"column":0},"generated":{"line":1,"column":844}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":47,"column":0},"generated":{"line":1,"column":863}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":48,"column":0},"generated":{"line":1,"column":881}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":48,"column":0},"generated":{"line":1,"column":886}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":49,"column":0},"generated":{"line":1,"column":911}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":49,"column":0},"generated":{"line":1,"column":916}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":49,"column":0},"generated":{"line":1,"column":940}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":50,"column":0},"generated":{"line":1,"column":942}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":50,"column":0},"generated":{"line":1,"column":944}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":50,"column":0},"generated":{"line":1,"column":957}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":51,"column":0},"generated":{"line":1,"column":962}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":51,"column":0},"generated":{"line":1,"column":967}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":51,"column":0},"generated":{"line":1,"column":991}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":52,"column":0},"generated":{"line":1,"column":993}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":52,"column":0},"generated":{"line":1,"column":998}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":52,"column":0},"generated":{"line":1,"column":1007}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":52,"column":0},"generated":{"line":1,"column":1018}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":52,"column":0},"generated":{"line":1,"column":1023}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":52,"column":0},"generated":{"line":1,"column":1034}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":52,"column":0},"generated":{"line":1,"column":1039}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":56,"column":0},"generated":{"line":1,"column":1051}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":58,"column":0},"generated":{"line":1,"column":1060}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":57,"column":0},"generated":{"line":1,"column":1063}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":57,"column":0},"generated":{"line":1,"column":1065}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":57,"column":0},"generated":{"line":1,"column":1071}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":57,"column":0},"generated":{"line":1,"column":1076}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":57,"column":0},"generated":{"line":1,"column":1086}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":58,"column":0},"generated":{"line":1,"column":1119}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":58,"column":0},"generated":{"line":1,"column":1124}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":58,"column":0},"generated":{"line":1,"column":1136}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":58,"column":0},"generated":{"line":1,"column":1138}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":60,"column":0},"generated":{"line":1,"column":1145}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":60,"column":0},"generated":{"line":1,"column":1151}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":60,"column":0},"generated":{"line":1,"column":1153}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":60,"column":0},"generated":{"line":1,"column":1158}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":60,"column":0},"generated":{"line":1,"column":1166}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":60,"column":0},"generated":{"line":1,"column":1172}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":61,"column":0},"generated":{"line":1,"column":1187}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":61,"column":0},"generated":{"line":1,"column":1191}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":61,"column":0},"generated":{"line":1,"column":1193}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":62,"column":0},"generated":{"line":1,"column":1200}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":62,"column":0},"generated":{"line":1,"column":1206}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":62,"column":0},"generated":{"line":1,"column":1208}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":62,"column":0},"generated":{"line":1,"column":1213}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":62,"column":0},"generated":{"line":1,"column":1222}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":62,"column":0},"generated":{"line":1,"column":1235}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":63,"column":0},"generated":{"line":1,"column":1238}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":68,"column":0},"generated":{"line":1,"column":1241}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":68,"column":0},"generated":{"line":1,"column":1243}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":68,"column":0},"generated":{"line":1,"column":1250}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":69,"column":0},"generated":{"line":1,"column":1251}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":69,"column":0},"generated":{"line":1,"column":1259}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":69,"column":0},"generated":{"line":1,"column":1264}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":69,"column":0},"generated":{"line":1,"column":1273}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":70,"column":0},"generated":{"line":1,"column":1281}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":70,"column":0},"generated":{"line":1,"column":1287}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":70,"column":0},"generated":{"line":1,"column":1292}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":70,"column":0},"generated":{"line":1,"column":1300}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":71,"column":0},"generated":{"line":1,"column":1306}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":71,"column":0},"generated":{"line":1,"column":1320}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":71,"column":0},"generated":{"line":1,"column":1325}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":72,"column":0},"generated":{"line":1,"column":1346}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":72,"column":0},"generated":{"line":1,"column":1360}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":72,"column":0},"generated":{"line":1,"column":1365}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":74,"column":0},"generated":{"line":1,"column":1375}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":74,"column":0},"generated":{"line":1,"column":1377}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":74,"column":0},"generated":{"line":1,"column":1385}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":74,"column":0},"generated":{"line":1,"column":1392}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":74,"column":0},"generated":{"line":1,"column":1397}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":76,"column":0},"generated":{"line":1,"column":1405}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":76,"column":0},"generated":{"line":1,"column":1410}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":76,"column":0},"generated":{"line":1,"column":1415}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":77,"column":0},"generated":{"line":1,"column":1417}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":77,"column":0},"generated":{"line":1,"column":1422}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":77,"column":0},"generated":{"line":1,"column":1430}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":77,"column":0},"generated":{"line":1,"column":1435}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":77,"column":0},"generated":{"line":1,"column":1443}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":77,"column":0},"generated":{"line":1,"column":1449}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":77,"column":0},"generated":{"line":1,"column":1459}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":77,"column":0},"generated":{"line":1,"column":1464}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":77,"column":0},"generated":{"line":1,"column":1472}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":77,"column":0},"generated":{"line":1,"column":1478}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":78,"column":0},"generated":{"line":1,"column":1482}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":78,"column":0},"generated":{"line":1,"column":1487}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":78,"column":0},"generated":{"line":1,"column":1497}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":80,"column":0},"generated":{"line":1,"column":1499}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":80,"column":0},"generated":{"line":1,"column":1504}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":81,"column":0},"generated":{"line":1,"column":1513}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":81,"column":0},"generated":{"line":1,"column":1518}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":81,"column":0},"generated":{"line":1,"column":1527}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":81,"column":0},"generated":{"line":1,"column":1534}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":81,"column":0},"generated":{"line":1,"column":1539}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":81,"column":0},"generated":{"line":1,"column":1547}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":81,"column":0},"generated":{"line":1,"column":1549}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":64,"column":0},"generated":{"line":1,"column":1560}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":64,"column":0},"generated":{"line":1,"column":1562}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":64,"column":0},"generated":{"line":1,"column":1585}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":85,"column":0},"generated":{"line":1,"column":1610}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":86,"column":0},"generated":{"line":1,"column":1619}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":86,"column":0},"generated":{"line":1,"column":1624}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":87,"column":0},"generated":{"line":1,"column":1636}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":87,"column":0},"generated":{"line":1,"column":1641}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":87,"column":0},"generated":{"line":1,"column":1651}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":88,"column":0},"generated":{"line":1,"column":1660}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":88,"column":0},"generated":{"line":1,"column":1665}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":88,"column":0},"generated":{"line":1,"column":1675}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":88,"column":0},"generated":{"line":1,"column":1683}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":88,"column":0},"generated":{"line":1,"column":1690}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":89,"column":0},"generated":{"line":1,"column":1695}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":89,"column":0},"generated":{"line":1,"column":1700}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":89,"column":0},"generated":{"line":1,"column":1709}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":89,"column":0},"generated":{"line":1,"column":1725}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":89,"column":0},"generated":{"line":1,"column":1730}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":89,"column":0},"generated":{"line":1,"column":1735}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":89,"column":0},"generated":{"line":1,"column":1740}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":90,"column":0},"generated":{"line":1,"column":1751}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":90,"column":0},"generated":{"line":1,"column":1756}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":91,"column":0},"generated":{"line":1,"column":1765}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":91,"column":0},"generated":{"line":1,"column":1770}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":91,"column":0},"generated":{"line":1,"column":1779}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":91,"column":0},"generated":{"line":1,"column":1789}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":91,"column":0},"generated":{"line":1,"column":1794}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":93,"column":0},"generated":{"line":1,"column":1803}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":93,"column":0},"generated":{"line":1,"column":1808}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":93,"column":0},"generated":{"line":1,"column":1813}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":94,"column":0},"generated":{"line":1,"column":1816}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":94,"column":0},"generated":{"line":1,"column":1821}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":94,"column":0},"generated":{"line":1,"column":1829}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":95,"column":0},"generated":{"line":1,"column":1832}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":95,"column":0},"generated":{"line":1,"column":1837}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":95,"column":0},"generated":{"line":1,"column":1847}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":99,"column":0},"generated":{"line":1,"column":1854}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":99,"column":0},"generated":{"line":1,"column":1861}},{"source":"../../../../node_modules/@neft/core/src/document/use.js","original":{"line":99,"column":0},"generated":{"line":1,"column":1869}}],"sources":{"../../../../node_modules/@neft/core/src/document/use.js":"const log = require('../log')\nconst assert = require('../assert')\nconst eventLoop = require('../event-loop')\n\nclass Use {\n  constructor(document, element) {\n    this.document = document\n    this.element = document.element.getChildByAccessPath(element)\n\n    this.name = ''\n    this.refName = ''\n    this.component = null\n\n    this.hiddenDepth = 0\n    this.immediateRenderPending = false\n    this.onElementPropsChange = this.element.onPropsChange.asSignalDispatcher()\n\n    this.element.onPropsChange.connect(this.handleElementPropsChange, this)\n\n    let anyElement = this.element\n    while (anyElement) {\n      if ('n-if' in anyElement.props) {\n        anyElement.onVisibleChange.connect(this.handleElementVisibleChange, this)\n      }\n      anyElement = anyElement.parent\n    }\n  }\n\n  handleElementVisibleChange(oldValue) {\n    const value = !oldValue\n    const hiddenInc = value ? -1 : 1\n    this.hiddenDepth += hiddenInc\n    if (this.document.rendered && !this.component && this.hiddenDepth === 0) {\n      this.renderImmediate()\n    } else if (this.document.rendered && this.component && this.hiddenDepth > 0) {\n      this.revert()\n    }\n  }\n\n  handleElementPropsChange(propName) {\n    if (propName !== 'n-component') return\n    if (!this.document.rendered) return\n    this.revert()\n    this.renderImmediate()\n  }\n\n  renderImmediate() {\n    if (this.immediateRenderPending) return\n    this.immediateRenderPending = true\n    eventLoop.setImmediate(() => {\n      this.immediateRenderPending = false\n      if (this.document.rendered && !this.component) this.render()\n    })\n  }\n\n  render() {\n    assert.notOk(this.component, '<n-use /> is already rendered')\n    if (this.hiddenDepth > 0) return\n\n    const name = this.element.props['n-component']\n    if (!name) return\n    const component = this.document.getComponent(name)\n    if (!component) {\n      log.warning(`Cannot find ${name} component to render`)\n      return\n    }\n\n    component.render({\n      context: this.document.context,\n      props: this.element.props,\n      onPropsChange: this.onElementPropsChange,\n      sourceElement: this.element,\n    })\n    component.element.parent = this.element\n\n    this.name = name\n    this.refName = this.element.props['n-ref'] || this.element.props.ref\n    this.component = component\n\n    if (this.refName) {\n      this.document.setRef(this.refName, component.exported)\n    }\n  }\n\n  revert() {\n    if (!this.component) return\n    this.component.revert()\n    this.component.element.parent = null\n    this.document.returnComponent(this.name, this.component)\n    if (this.refName) {\n      this.document.deleteRef(this.refName)\n    }\n    this.name = ''\n    this.refName = ''\n    this.component = null\n  }\n}\n\nmodule.exports = Use\n"},"lineCount":null}},"error":null,"hash":"4c93524ee7123c411f4255a848d1c530","cacheData":{"env":{}}}