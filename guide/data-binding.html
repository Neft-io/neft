<!doctype html>
<meta charset="utf-8">
<meta http-equiv="cache-control" content="max-age=0">
<meta http-equiv="cache-control" content="no-cache">
<meta http-equiv="expires" content="0">
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT">
<meta http-equiv="pragma" content="no-cache">
<link rel="stylesheet" type="text/css" href="/styles/main.css">
<nav id="navbar">
    <div class="main">
        <div class="logo">
            <a href="/">
                <img src="/media/logo-white-text-on.svg" alt="Neft.io" />
            </a>
        </div>

        <div class="links">
            <a href="/guide/get-started.html" class="active">Guide</a>
            <a href="/api/app.html" class="">API</a>
            <!--<a href="/examples.html" class="">Examples</a>-->
        </div>

        <div id="searchResult"></div>
        <input id="search" type="text" placeholder="Search">
        <span id="searchTitle">Search</span>
    </div>
</nav>
<div class="main">
    <aside id="aside">
<ul>
    <li>
        <a href="/guide/get-started.html" class="">
            Get Started
        </a>
    </li>
    <li>
        <a href="/guide/testing.html" class="">
            Testing
        </a>
    </li>
    <li>
        <a href="/guide/scripting.html" class="">
            Scripting
        </a>
    </li>
    <li>
        <a href="/guide/virtual-dom.html" class="">
            Virtual DOM
        </a>
    </li>
    <li>
        <a href="/guide/contribute.html" class="">
            Contribute
        </a>
    </li>
    <li>
        <a href="/guide/data-binding.html" class="active">
            Data Binding
        </a>
    </li>
    <li>
        <a href="/guide/extensions.html" class="">
            Extensions
        </a>
    </li>
    <li>
        <a href="/guide/native-communication.html" class="">
            Native Communication
        </a>
    </li>
    <li>
        <a href="/guide/networking.html" class="">
            Networking
        </a>
    </li>
    <li>
        <a href="/guide/routing.html" class="">
            Routing
        </a>
    </li>
    <li>
        <a href="/guide/models.html" class="">
            Models
        </a>
    </li>
    <li>
        <a href="/guide/components.html" class="">
            Components
        </a>
    </li>
    <li>
        <a href="/guide/styles.html" class="">
            Styles
        </a>
    </li>
    <li>
        <a href="/guide/animations.html" class="">
            Animations
        </a>
    </li>
    <li>
        <a href="/guide/components-integration.html" class="">
            Components Integration
        </a>
    </li>
    <li>
        <a href="/guide/custom-properties.html" class="">
            Custom Properties
        </a>
    </li>
    <li>
        <a href="/guide/generic-styles.html" class="">
            Generic Styles
        </a>
    </li>
    <li>
        <a href="/guide/layout.html" class="">
            Layout
        </a>
    </li>
    <li>
        <a href="/guide/main-style.html" class="">
            Main Style
        </a>
    </li>
    <li>
        <a href="/guide/runtime-styling.html" class="">
            Runtime Styling
        </a>
    </li>
    <li>
        <a href="/guide/type-extending.html" class="">
            Type Extending
        </a>
    </li>
    <li>
        <a href="/guide/static-resources.html" class="">
            Static Resources
        </a>
    </li>
</ul>
    </aside>
    <main class="content" id="guide">
        <h1 id="data-binding">Data Binding</h1>
<p>From previous articles, you learned that Neft has three places, where you can handle your data:</p>
<ol>
<li><a href="/routing.md">Routing</a>,</li>
<li><a href="/views.md">Views</a>,</li>
<li><a href="/styles.md">Styles</a>.</li>
</ol>
<p>Each place is different and built for specified use-cases.</p>
<p>Data originally comes from <a href="/routing.md">routes</a> and is propagated through <a href="/views.md">views</a> to <a href="/styles.md">styles</a>.</p>
<p>Neft supports automatic updates, when you change data. It&#39;s called <em>data binding</em>.</p>
<p>For instance, in a <a href="/routing.md">route</a> you created a <a href="/api/list.html">list</a> of records. Such list is rendered by one of your views. If you want to add another record, you just do it in a route, and views are automatically refreshed.</p>
<p>You need to remember, that such list need to be a <a href="/api/list.html">Neft.List</a>. Standard arrays are not supported, and your change won&#39;t be propagated.</p>
<p>To better understand how to use it, let&#39;s start from the beginning...</p>
<h2 id="signals"><a href="/api/signal.html">Signals</a></h2>
<p><a href="/api/signal.html">Signal</a> is a function.</p>
<p>You can connect to it (listen on signals) and disconnect.</p>
<p>It can be emitted with parameters.</p>
<p>It&#39;s used in various Neft modules to support automatically data-binding.
In most cases there is no need to create them manually.</p>
<pre><code class="hljs javascript"><span class="hljs-keyword">const</span> { signal } = Neft;
<span class="hljs-keyword">const</span> onLoad = signal.create();
onLoad.connect(<span class="hljs-function">(<span class="hljs-params">src</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`LOADED: <span class="hljs-subst">${src}</span>`</span>));
onLoad.emit(<span class="hljs-string">'/logo.png'</span>);
<span class="hljs-comment">// LOADED: /logo.png</span>
</code></pre>
<p>Similar to <em>events model</em> well-known in other frameworks.</p>
<p>Do you remember that <em>Signal</em> is a function? It works like <code>connect</code>.</p>
<p>Both lines do the same:</p>
<pre><code class="hljs javascript">onLoad.connect(<span class="hljs-function">(<span class="hljs-params">src</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`LOADED: <span class="hljs-subst">${src}</span>`</span>));
onLoad(<span class="hljs-function">(<span class="hljs-params">src</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`LOADED: <span class="hljs-subst">${src}</span>`</span>));
</code></pre>
<p>If you want to stop listening on a changes, call <code>disconnect</code> with registered listener.</p>
<pre><code class="hljs javascript"><span class="hljs-keyword">const</span> { signal } = Neft;
<span class="hljs-keyword">const</span> onLoad = signal.create();
<span class="hljs-keyword">const</span> logSrc = <span class="hljs-function">(<span class="hljs-params">src</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`LOADED: <span class="hljs-subst">${src}</span>`</span>);
onLoad(logSrc);
onLoad.disconnect(logSrc);
onLoad.emit(<span class="hljs-string">'/logo.png'</span>); <span class="hljs-comment">// does nothing</span>
</code></pre>
<p>Signals have a limit. You can emit up to two parameters in one call. The workaround is to emit an object.</p>
<p>Now you know how Neft propagates changes. Let&#39;s see how we can you this knowledge.</p>
<h3 id="list"><a href="/api/list.html">List</a></h3>
<p><a href="/api/list.html">List</a> is an observable version of standard arrays.</p>
<p>To create a list, call <a href="/api/list.html#constructor">its constructor</a>:</p>
<pre><code class="hljs javascript"><span class="hljs-keyword">const</span> { List } = Neft;
<span class="hljs-keyword">new</span> List(); <span class="hljs-comment">// empty list</span>
<span class="hljs-keyword">new</span> List([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>]); <span class="hljs-comment">// list with two values: 1 and 2</span>
List(); <span class="hljs-comment">// *new* is optional</span>
</code></pre>
<p>Data in a list can be modified. Basic methods are: <a href="/api/list.html#append"><code>append()</code></a>, <a href="/api/list.html#set"><code>set()</code></a>, <a href="/api/list.html#insert"><code>insert()</code></a> and <a href="/api/list.html#pop"><code>pop()</code></a>.</p>
<pre><code class="hljs javascript"><span class="hljs-keyword">const</span> { List } = Neft;
<span class="hljs-keyword">const</span> data = <span class="hljs-keyword">new</span> List;

data.append(<span class="hljs-string">'tree'</span>);
data.insert(<span class="hljs-number">0</span>, <span class="hljs-string">'house'</span>);
<span class="hljs-built_in">console</span>.log(data[<span class="hljs-number">0</span>]); <span class="hljs-comment">// house</span>
<span class="hljs-built_in">console</span>.log(data[<span class="hljs-number">1</span>]); <span class="hljs-comment">// tree</span>
<span class="hljs-built_in">console</span>.log(data.length); <span class="hljs-comment">// 2</span>

data.pop();
<span class="hljs-built_in">console</span>.log(data.length); <span class="hljs-comment">// 1</span>

data.set(<span class="hljs-number">0</span>, <span class="hljs-string">'ketchup'</span>);
<span class="hljs-built_in">console</span>.log(data[<span class="hljs-number">0</span>]); <span class="hljs-comment">// ketchup</span>
</code></pre>
<p>Each change in a list calls different <a href="/api/signal.html">signals</a>:</p>
<ul>
<li><a href="/api/list/html#onchange"><code>onChange</code></a> called when some value change,</li>
<li><a href="/api/list/html#oninsert"><code>onInsert</code></a> called with added value,</li>
<li><a href="/api/list/html#onpop"><code>onPop</code></a> called with removed value.</li>
</ul>
<pre><code class="hljs javascript"><span class="hljs-keyword">const</span> { List } = Neft;
<span class="hljs-keyword">const</span> data = <span class="hljs-keyword">new</span> List;

data.append(<span class="hljs-string">'fries'</span>);
data.onPop(<span class="hljs-function">(<span class="hljs-params">oldValue, index</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">${oldValue}</span> has been removed`</span>));

data.pop();
<span class="hljs-comment">// fries has been removed</span>
</code></pre>
<h2 id="dict"><a href="/api/dict.html">Dict</a></h2>
<p><a href="/api/dict.html">Dict</a> is an observable version of standard objects.</p>
<p>To create a dict, call <a href="/api/dict.html#constructor">its constructor</a>:</p>
<pre><code class="hljs javascript"><span class="hljs-keyword">const</span> { Dict } = Neft;
<span class="hljs-keyword">new</span> Dict(); <span class="hljs-comment">// empty dict</span>
<span class="hljs-keyword">new</span> Dict({ <span class="hljs-attr">name</span>: <span class="hljs-string">'Johny'</span> }); <span class="hljs-comment">// dict with one key</span>
Dict(); <span class="hljs-comment">// *new* is optional</span>
</code></pre>
<p>Data in a dict can be changed using the <a href="/api/dict.html#set"><code>set()</code> method</a>.</p>
<pre><code class="hljs javascript"><span class="hljs-keyword">const</span> { Dict } = Neft;
<span class="hljs-keyword">const</span> data = <span class="hljs-keyword">new</span> Dict;

data.set(<span class="hljs-string">'pet'</span>, <span class="hljs-string">'cat'</span>);
<span class="hljs-built_in">console</span>.log(data.pet); <span class="hljs-comment">// cat</span>
</code></pre>
<p>Each change in a dict emits <a href="/api/dict.html#onchange"><code>onChange</code> signal</a>.</p>
<pre><code class="hljs javascript"><span class="hljs-keyword">const</span> { Dict } = Neft;
<span class="hljs-keyword">const</span> data = <span class="hljs-keyword">new</span> Dict;

data.onChange(<span class="hljs-function">(<span class="hljs-params">key, oldValue</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">${key}</span> now is equal <span class="hljs-subst">${data[key]}</span>`</span>));
data.set(<span class="hljs-string">'pet'</span>, <span class="hljs-string">'cat'</span>);
<span class="hljs-comment">// pet now is equal cat</span>
</code></pre>

    </main>
</div>
<link rel="stylesheet" type="text/css" href="/styles/highlights-github.css">
<script src="/scripts/aside.js"></script>
<script src="/scripts/svg-render.js"></script>
<script src="/scripts/search-texts.js"></script>
<script src="/scripts/elasticlunr.min.js"></script>
<script src="/scripts/search.js"></script>
