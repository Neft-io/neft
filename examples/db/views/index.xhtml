<style>
TextInput {
    query: 'input[type=text]';
    layout.fillWidth: true;
}
</style>

<script>
const { db } = Neft;
const KEY = 'input-text';

this.onCreate(function () {
    this.onError = (error) => {
        if (error) {
            this.state.set('error', error.message);
        }
    };

    this.saveText = () => {
        db.set(KEY, this.refs.input.style.text, this.onError);
    };

    this.removeText = () => {
        db.remove(KEY, this.onError);
    };
});

this.onBeforeRender(function () {
    this.state.set('error', '');

    db.get(KEY, (error, value) => {
        this.refs.input.style.text = value || '';
    });
});
</script>

<body>
    <p n-if="${state.error}">ERROR: ${state.error}</p>
    <p>Change text and restart application to see saved value</p>
    <input type="text" ref="input" n-style:onTextChange="${this.saveText()}" />
    <button n-style:pointer:onClick="${this.removeText}">Remove</button>
</body>
