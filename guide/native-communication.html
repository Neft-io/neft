<!doctype html>
<meta charset="utf-8">
<meta http-equiv="cache-control" content="max-age=0">
<meta http-equiv="cache-control" content="no-cache">
<meta http-equiv="expires" content="0">
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT">
<meta http-equiv="pragma" content="no-cache">
<link rel="stylesheet" type="text/css" href="/styles/main.css">
<nav id="navbar">
    <div class="main">
        <div class="logo">
            <a href="/">
                <img src="/media/logo-white-text-on.svg" alt="Neft.io" />
            </a>
        </div>

        <div class="links">
            <a href="/guide/get-started.html" class="active">Guide</a>
            <a href="/api/app.html" class="">API</a>
            <!--<a href="/examples.html" class="">Examples</a>-->
        </div>

        <div id="searchResult"></div>
        <input id="search" type="text" placeholder="Search">
        <span id="searchTitle">Search</span>
    </div>
</nav>
<div class="main">
    <aside id="aside">
<ul>
    <li>
        <a href="/guide/get-started.html" class="">
            Get Started
        </a>
    </li>
    <li>
        <a href="/guide/testing.html" class="">
            Testing
        </a>
    </li>
    <li>
        <a href="/guide/scripting.html" class="">
            Scripting
        </a>
    </li>
    <li>
        <a href="/guide/virtual-dom.html" class="">
            Virtual DOM
        </a>
    </li>
    <li>
        <a href="/guide/contribute.html" class="">
            Contribute
        </a>
    </li>
    <li>
        <a href="/guide/data-binding.html" class="">
            Data Binding
        </a>
    </li>
    <li>
        <a href="/guide/extensions.html" class="">
            Extensions
        </a>
    </li>
    <li>
        <a href="/guide/native-communication.html" class="active">
            Native Communication
        </a>
    </li>
    <li>
        <a href="/guide/networking.html" class="">
            Networking
        </a>
    </li>
    <li>
        <a href="/guide/routing.html" class="">
            Routing
        </a>
    </li>
    <li>
        <a href="/guide/models.html" class="">
            Models
        </a>
    </li>
    <li>
        <a href="/guide/components.html" class="">
            Components
        </a>
    </li>
    <li>
        <a href="/guide/styles.html" class="">
            Styles
        </a>
    </li>
    <li>
        <a href="/guide/animations.html" class="">
            Animations
        </a>
    </li>
    <li>
        <a href="/guide/components-integration.html" class="">
            Components Integration
        </a>
    </li>
    <li>
        <a href="/guide/custom-properties.html" class="">
            Custom Properties
        </a>
    </li>
    <li>
        <a href="/guide/generic-styles.html" class="">
            Generic Styles
        </a>
    </li>
    <li>
        <a href="/guide/layout.html" class="">
            Layout
        </a>
    </li>
    <li>
        <a href="/guide/main-style.html" class="">
            Main Style
        </a>
    </li>
    <li>
        <a href="/guide/runtime-styling.html" class="">
            Runtime Styling
        </a>
    </li>
    <li>
        <a href="/guide/type-extending.html" class="">
            Type Extending
        </a>
    </li>
    <li>
        <a href="/guide/static-resources.html" class="">
            Static Resources
        </a>
    </li>
</ul>
    </aside>
    <main class="content" id="guide">
        <h1 id="native-communication">Native Communication</h1>
<p>It&#39;s not possible to support all different APIs on all supported platforms. Sometimes you need to code in native.</p>
<p>Each platform can use different programming language. For instance on Android you can use <em>Java</em> or <em>C</em>.</p>
<p>You cannot call native methods directly from JavaScript, but you can achieve such communication creating a <strong>bridge</strong>.</p>
<p>Neft provides a module called <a href="/api/native.html">native</a>.
Use it in your JavaScript code to send data and to receive it.</p>
<p>Native communication needs to be asynchronous and cannot block your execution.</p>
<p>In passing and receiving data you&#39;re limited to basic types:</p>
<ul>
<li><code>null</code>,</li>
<li>float number,</li>
<li>boolean,</li>
<li>string.</li>
</ul>
<p>Passing complex structures like arrays or objects is not supported, but you can parse it to JSON and send as a string.</p>
<p>Let&#39;s check, how we can communicate on different platforms:</p>
<h2 id="javascript-client">JavaScript client</h2>
<p>To send and receive native messages, use <a href="/api/native.html">native</a> module.</p>
<pre><code class="hljs javascript"><span class="hljs-keyword">const</span> { callNativeFunction, onNativeEvent } = Neft.native;
callNativeFunction(<span class="hljs-string">"functionName"</span>, <span class="hljs-string">"arg1"</span>, <span class="hljs-string">"arg2"</span>, <span class="hljs-string">"argMore..."</span>);
onNativeEvent(<span class="hljs-string">"eventName"</span>, (arg1, arg2, arg3) -&gt; {});
</code></pre>
<h2 id="ios">iOS</h2>
<p>Create a <code>native/ios/CustomApp.swift</code> file in your main application folder.</p>
<pre><code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomApp</span> </span>{
    <span class="hljs-keyword">init</span>() {
        <span class="hljs-type">App</span>.getApp().client.pushEvent(<span class="hljs-string">"eventName"</span>, args: [<span class="hljs-string">"arg1"</span>, <span class="hljs-string">"arg2"</span>, <span class="hljs-type">CGFloat</span>(<span class="hljs-number">2.4</span>), <span class="hljs-literal">nil</span>])
        <span class="hljs-type">App</span>.getApp().client.addCustomFunction(<span class="hljs-string">"functionName"</span>) {
            (args: [<span class="hljs-type">Any</span>?]) <span class="hljs-keyword">in</span> ()
        }
    }
}
</code></pre>
<h2 id="android">Android</h2>
<p>Create a <code>native/android/CustomApp.java</code> file in your main application folder.</p>
<pre><code class="hljs java"><span class="hljs-keyword">package</span> io.neft.customapp;

<span class="hljs-keyword">import</span> io.neft.App;
<span class="hljs-keyword">import</span> io.neft.utils.Consumer;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomApp</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">CustomApp</span><span class="hljs-params">()</span> </span>{
        App.getInstance().getClient().pushEvent(<span class="hljs-string">"eventName"</span>, <span class="hljs-string">"arg1"</span>, <span class="hljs-string">"arg2"</span>, <span class="hljs-number">2.4f</span>, <span class="hljs-keyword">null</span>);
        App.getInstance().getClient().addCustomFunction(<span class="hljs-string">"functionName"</span>, <span class="hljs-keyword">new</span> Consumer&lt;Object[]&gt;() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">accept</span><span class="hljs-params">(Object[] args)</span> </span>{}
        });
    }
}
</code></pre>

    </main>
</div>
<link rel="stylesheet" type="text/css" href="/styles/highlights-github.css">
<script src="/scripts/aside.js"></script>
<script src="/scripts/svg-render.js"></script>
<script src="/scripts/search-texts.js"></script>
<script src="/scripts/elasticlunr.min.js"></script>
<script src="/scripts/search.js"></script>
