<!doctype html>
<meta charset="utf-8">
<meta http-equiv="cache-control" content="max-age=0">
<meta http-equiv="cache-control" content="no-cache">
<meta http-equiv="expires" content="0">
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT">
<meta http-equiv="pragma" content="no-cache">
<link rel="stylesheet" type="text/css" href="/styles/main.css">
<nav id="navbar">
    <div class="main">
        <div class="logo">
            <a href="/">
                <img src="/media/logo-white-text-on.svg" alt="Neft.io" />
            </a>
        </div>

        <div class="links">
            <a href="/guide/get-started.html" class="active">Guide</a>
            <a href="/api/app.html" class="">API</a>
            <!--<a href="/examples.html" class="">Examples</a>-->
        </div>

        <div id="searchResult"></div>
        <input id="search" type="text" placeholder="Search">
        <span id="searchTitle">Search</span>
    </div>
</nav>
<div class="main">
    <aside id="aside">
<ul>
    <li>
        <a href="/guide/get-started.html" class="">
            Get Started
        </a>
    </li>
    <li>
        <a href="/guide/testing.html" class="">
            Testing
        </a>
    </li>
    <li>
        <a href="/guide/scripting.html" class="active">
            Scripting
        </a>
    </li>
    <li>
        <a href="/guide/virtual-dom.html" class="">
            Virtual DOM
        </a>
    </li>
    <li>
        <a href="/guide/contribute.html" class="">
            Contribute
        </a>
    </li>
    <li>
        <a href="/guide/data-binding.html" class="">
            Data Binding
        </a>
    </li>
    <li>
        <a href="/guide/extensions.html" class="">
            Extensions
        </a>
    </li>
    <li>
        <a href="/guide/native-communication.html" class="">
            Native Communication
        </a>
    </li>
    <li>
        <a href="/guide/networking.html" class="">
            Networking
        </a>
    </li>
    <li>
        <a href="/guide/routing.html" class="">
            Routing
        </a>
    </li>
    <li>
        <a href="/guide/models.html" class="">
            Models
        </a>
    </li>
    <li>
        <a href="/guide/components.html" class="">
            Components
        </a>
    </li>
    <li>
        <a href="/guide/styles.html" class="">
            Styles
        </a>
    </li>
    <li>
        <a href="/guide/animations.html" class="">
            Animations
        </a>
    </li>
    <li>
        <a href="/guide/components-integration.html" class="">
            Components Integration
        </a>
    </li>
    <li>
        <a href="/guide/custom-properties.html" class="">
            Custom Properties
        </a>
    </li>
    <li>
        <a href="/guide/generic-styles.html" class="">
            Generic Styles
        </a>
    </li>
    <li>
        <a href="/guide/layout.html" class="">
            Layout
        </a>
    </li>
    <li>
        <a href="/guide/main-style.html" class="">
            Main Style
        </a>
    </li>
    <li>
        <a href="/guide/runtime-styling.html" class="">
            Runtime Styling
        </a>
    </li>
    <li>
        <a href="/guide/type-extending.html" class="">
            Type Extending
        </a>
    </li>
    <li>
        <a href="/guide/static-resources.html" class="">
            Static Resources
        </a>
    </li>
</ul>
    </aside>
    <main class="content" id="guide">
        <h1 id="scripting">Scripting</h1>
<p>Each component file and <a href="/components.html#component">component</a> can be scripted.</p>
<p>The whole <em>JavaScript</em> code put inside the <code>&lt;script /&gt;</code> tag.</p>
<p>In the component file:</p>
<pre><code class="hljs xhtml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>or in a <a href="/components.html#component">component</a>:</p>
<pre><code class="hljs xhtml"><span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Avatar"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span>
</code></pre>
<h2 id="component-lifecycle">Component lifecycle</h2>
<p>Inside the <code>&lt;sript /&gt;</code> tag you can connect to four <a href="/data-binding.html#signal">signals</a>:</p>
<ul>
<li><code>this.onBeforeRender()</code>,</li>
<li><code>this.onRender()</code>,</li>
<li><code>this.onBeforeRevert()</code>,</li>
<li><code>this.onRevert()</code>.</li>
</ul>
<p>Component once created is reusing. Because of that, <code>&lt;script&gt;</code> is called only when there is no free components to use and a new one has to be created.</p>
<p>When a component needs to be put into a document, it&#39;s <strong>rendered</strong> (<code>onBeforeRender</code>, <code>onRender</code>).</p>
<p>When a component is no longer needed, it&#39;s <strong>reverted</strong> (<code>onBeforeRevert</code>, <code>onRevert</code>).</p>
<p>Reverted components can be rendered later.</p>
<h2 id="custom-methods">Custom methods</h2>
<p>Custom methods should be created inside the <code>&lt;script&gt;</code> tag as lambda functions.</p>
<p>It ensures, that you have always the proper context (<code>this</code>) inside all methods.</p>
<p>Component context can be used in <a href="/components.html#string-interpolation">String Interpolation</a>.</p>
<pre><code class="hljs xhtml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>${this.plusOne(2)}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span> <span class="hljs-comment">&lt;!-- &lt;p&gt;3&lt;/p&gt; --&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">this</span>.plusOne = <span class="hljs-function">(<span class="hljs-params">number</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> number + <span class="hljs-number">1</span>;
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h2 id="this-state"><code>this.state</code></h2>
<p><code>this.state</code> is a <a href="/data-binding.html#dict">Dict</a>.
Use it to store custom data for a rendered component.</p>
<p>It&#39;s save to use. Automatically cleared when component is <em>reverted</em>.</p>
<p>Data can be read in <a href="/components.html#string-interpolation">String Interpolation</a> under the <code>${state}</code> object.</p>
<p>Default <code>state</code> must be defined in <code>onBeforeRender</code> signal.</p>
<pre><code class="hljs xhtml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Counter: ${state.counterValue}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span> <span class="hljs-comment">&lt;!-- &lt;p&gt;Counter: 2&lt;/p&gt; --&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">this</span>.increment = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">this</span>.state.set(<span class="hljs-string">'counterValue'</span>, <span class="hljs-keyword">this</span>.state.counterValue + <span class="hljs-number">1</span>);
};

<span class="hljs-keyword">this</span>.onBeforeRender(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.state.set(<span class="hljs-string">'counterValue'</span>, <span class="hljs-number">1</span>);
    <span class="hljs-keyword">this</span>.increment();
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h2 id="this-refs"><code>this.refs</code></h2>
<p>All nodes with <a href="/components.html#ref"><code>ref</code></a> tags are available under the <code>this.refs</code> object.</p>
<pre><code class="hljs xhtml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="actionscript">
<span class="hljs-keyword">this</span>.onRender(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">this</span>.refs.image.props.set(<span class="hljs-string">'src'</span>, <span class="hljs-string">"rsc:background"</span>);
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"image"</span> /&gt;</span> <span class="hljs-comment">&lt;!-- &lt;img src="rsc:background" /&gt; --&gt;</span>
</code></pre>
<p>If node with <code>ref</code> tag renders a <a href="/components.html#component">component</a>, it refers to the <code>this</code> context and not no the <a href="/components/virtual-dom.html">Virtual DOM</a> element.</p>
<pre><code class="hljs xhtml"><span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Issue"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">this</span>.getTitle = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-string">'More gifs!'</span>;
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"IssueList"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">this</span>.onRender(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.refs.firstIssue.getTitle());
        <span class="hljs-comment">// More gifs!</span>
    });
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Issue</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"firstIssue"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">IssueList</span> /&gt;</span>
</code></pre>
<p>This object is available in <a href="/components.html#string-interpolation">String Interpolation</a> as <code>${refs}</code>.</p>
<h2 id="this-node"><code>this.node</code></h2>
<p>It refers to the main component or component <a href="/components/virtual-dom.html">element</a>.</p>
<p>More about it you&#39;ll learn in the <a href="/components/virtual-dom.html">next chapter</a> but you can use it to e.g. find an element by a selector.</p>
<pre><code class="hljs xhtml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">this</span>.onBeforeRender(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">const</span> spans = <span class="hljs-keyword">this</span>.node.queryAll(<span class="hljs-string">'p &gt; span'</span>);
    <span class="hljs-built_in">console</span>.log(spans);
    <span class="hljs-comment">// [&lt;span&gt;first&lt;/span&gt;, &lt;span&gt;third&lt;/span&gt;]</span>
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>first<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> second <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>third<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
</code></pre>
<h2 id="this-props"><code>this.props</code></h2>
<p><code>this.props</code> object contains properties used to create a <a href="/components.html#component">component</a>.</p>
<p>You should not change it.</p>
<p>Use it to configure creating components.</p>
<p>This object is available in <a href="/components.html#string-interpolation">String Interpolation</a> as <code>${props}</code>.</p>
<pre><code class="hljs xhtml"><span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"User"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">this</span>.onRender(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.props.nick);
        <span class="hljs-comment">// testslover32</span>
    });
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>${props.nick}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">User</span> <span class="hljs-attr">nick</span>=<span class="hljs-string">"testslover32"</span> /&gt;</span>
</code></pre>
<p><code>this.props</code> is an instance of <a href="/data-binding.html#dict">Dict</a> and can be changed in runtime. Connect to <a href="/api/dict.html#onchange"><code>this.props.onChange()</code></a> signal if you want to detect it manually.</p>
<h2 id="this-context"><code>this.context</code></h2>
<p>This property refers to a <a href="/routing.html">route</a> used to render this component.</p>
<p>You can use to make, for instance, a <em>HTTP</em> request.</p>
<pre><code class="hljs xhtml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="actionscript">
<span class="hljs-keyword">this</span>.onBeforeRender(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">this</span>.context.app.networking.get(<span class="hljs-string">'/users'</span>, (err, resp) =&gt; {});
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>... or to get a <a href="/api/app-route.html#data">route.data</a>.</p>
<p>More about it you&#39;ll learn in <a href="/routing.html">Routing</a> chapter.</p>
<p>This object is available in <a href="/components.html#string-interpolation">String Interpolation</a> as <code>${context}</code>.</p>
<h2 id="script-file">Script file</h2>
<p>You can move your <em>JavaScript</em> code to separated file.</p>
<p><code>&lt;script /&gt;</code> accepts <code>src</code> attribute. Use is with relative path.</p>
<pre><code class="hljs xhtml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./scriptFile.js"</span> /&gt;</span><span class="undefined"></span>
</code></pre>
<h2 id="coffeescript-support">CoffeeScript support</h2>
<p>If you like to use <em>CoffeeScript</em>, you can do it by specifying the <code>filename</code> attribute with the <em>.coffee</em> extension.</p>
<pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">filename</span>=<span class="hljs-string">"component.coffee"</span>&gt;</span><span class="javascript">
@sum = <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>

    </main>
</div>
<link rel="stylesheet" type="text/css" href="/styles/highlights-github.css">
<script src="/scripts/aside.js"></script>
<script src="/scripts/svg-render.js"></script>
<script src="/scripts/search-texts.js"></script>
<script src="/scripts/elasticlunr.min.js"></script>
<script src="/scripts/search.js"></script>
