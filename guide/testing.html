<!doctype html>
<meta charset="utf-8">
<meta http-equiv="cache-control" content="max-age=0">
<meta http-equiv="cache-control" content="no-cache">
<meta http-equiv="expires" content="0">
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT">
<meta http-equiv="pragma" content="no-cache">
<link rel="stylesheet" type="text/css" href="/styles/main.css">
<nav id="navbar">
    <div class="main">
        <div class="logo">
            <a href="/">
                <img src="/media/logo-white-text-on.svg" alt="Neft.io" />
            </a>
        </div>

        <div class="links">
            <a href="/guide/get-started.html" class="active">Guide</a>
            <a href="/api/app.html" class="">API</a>
            <!--<a href="/examples.html" class="">Examples</a>-->
        </div>

        <div id="searchResult"></div>
        <input id="search" type="text" placeholder="Search">
        <span id="searchTitle">Search</span>
    </div>
</nav>
<div class="main">
    <aside id="aside">
<ul>
    <li>
        <a href="/guide/get-started.html" class="">
            Get Started
        </a>
    </li>
    <li>
        <a href="/guide/testing.html" class="active">
            Testing
        </a>
    </li>
    <li>
        <a href="/guide/scripting.html" class="">
            Scripting
        </a>
    </li>
    <li>
        <a href="/guide/virtual-dom.html" class="">
            Virtual DOM
        </a>
    </li>
    <li>
        <a href="/guide/contribute.html" class="">
            Contribute
        </a>
    </li>
    <li>
        <a href="/guide/data-binding.html" class="">
            Data Binding
        </a>
    </li>
    <li>
        <a href="/guide/extensions.html" class="">
            Extensions
        </a>
    </li>
    <li>
        <a href="/guide/native-communication.html" class="">
            Native Communication
        </a>
    </li>
    <li>
        <a href="/guide/networking.html" class="">
            Networking
        </a>
    </li>
    <li>
        <a href="/guide/routing.html" class="">
            Routing
        </a>
    </li>
    <li>
        <a href="/guide/models.html" class="">
            Models
        </a>
    </li>
    <li>
        <a href="/guide/components.html" class="">
            Components
        </a>
    </li>
    <li>
        <a href="/guide/styles.html" class="">
            Styles
        </a>
    </li>
    <li>
        <a href="/guide/animations.html" class="">
            Animations
        </a>
    </li>
    <li>
        <a href="/guide/components-integration.html" class="">
            Components Integration
        </a>
    </li>
    <li>
        <a href="/guide/custom-properties.html" class="">
            Custom Properties
        </a>
    </li>
    <li>
        <a href="/guide/generic-styles.html" class="">
            Generic Styles
        </a>
    </li>
    <li>
        <a href="/guide/layout.html" class="">
            Layout
        </a>
    </li>
    <li>
        <a href="/guide/main-style.html" class="">
            Main Style
        </a>
    </li>
    <li>
        <a href="/guide/runtime-styling.html" class="">
            Runtime Styling
        </a>
    </li>
    <li>
        <a href="/guide/type-extending.html" class="">
            Type Extending
        </a>
    </li>
    <li>
        <a href="/guide/static-resources.html" class="">
            Static Resources
        </a>
    </li>
</ul>
    </aside>
    <main class="content" id="guide">
        <h1 id="testing">Testing</h1>
<p>Neft provides module for easy testing your code on different platforms.</p>
<p>Test files needs to be placed in <strong>tests</strong> folder.</p>
<p>Use <code>neft test</code> command to run your tests.</p>
<h2 id="test-case">Test case</h2>
<p>Use global <code>it</code> function to declare your first test.</p>
<p>This method accepts short description and function with your test case.</p>
<pre><code class="hljs javascript">it(<span class="hljs-string">'1+1 is 2'</span>, () =&gt; {
    assert(<span class="hljs-number">1</span>+<span class="hljs-number">1</span> === <span class="hljs-number">2</span>);
});</code></pre>
<p>If your test throws an exception (using <code>throw new Error(&#39;...&#39;)</code> or by <a href="/api/assert.html">assertions</a>), it&#39;s automatically marked as failed.</p>
<h2 id="nesting">Nesting</h2>
<p>Use global <code>describe</code> function and declare a container for tests.</p>
<p>It works just like <code>it</code>, but expects tests or other groups inside.</p>
<pre><code class="hljs javascript"><span class="hljs-keyword">const</span> sum = <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b;

describe(<span class="hljs-string">'sum method'</span>, () =&gt; {
    it(<span class="hljs-string">'adds both parameters'</span>, () =&gt; {
        assert(sum(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>) === <span class="hljs-number">3</span>);
    });
});</code></pre>
<h2 id="assertions">Assertions</h2>
<p>Writing conditions and throwing errors each time your result is wrong can be boring.</p>
<p>Boring coding is bad.</p>
<p>To make comparisons more compact, use <a href="/api/assert.html">assert</a> module.</p>
<p>It provides a lot of helpful methods, like:</p>
<ul>
<li><a href="/api/assert.html#assertisstring"><code>assert.isString()</code></a>,</li>
<li><a href="/api/assert.html#assertinstanceof"><code>assert.instanceOf()</code></a>,</li>
<li><a href="/api/assert.html#assertisequal"><code>assert.isEqual()</code></a>,</li>
<li>and <a href="/api/assert.html">more</a>.</li>
</ul>
<h2 id="app">App</h2>
<p>Global <code>app</code> object is your application just like in other files.</p>
<p>Use it to access e.g. models (<code>app.models</code>) or views (<code>app.views</code>).</p>
<p>Let&#39;s assume, we have a view <code>PlusButton.xhtml</code> like below:</p>
<pre><code class="hljs xhtml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">style:pointer:onClick</span>=<span class="hljs-string">"${this.increment()}"</span>&gt;</span>Increment<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">this</span>.increment = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">this</span>.state.set(<span class="hljs-string">'value'</span>, <span class="hljs-keyword">this</span>.state.value + <span class="hljs-number">1</span>);
};

<span class="hljs-keyword">this</span>.onRender(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.state.set(<span class="hljs-string">'value'</span>, <span class="hljs-number">0</span>);
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>
<p>... and we want to test whether <code>increment</code> method works like a charm.</p>
<pre><code class="hljs javascript">describe(<span class="hljs-string">'PlusButton'</span>, () =&gt; {
    <span class="hljs-keyword">let</span> view;

    beforeEach(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        view = app.views[<span class="hljs-string">'views/PlusButton.xhtml'</span>].render();
    });

    describe(<span class="hljs-string">'increment()'</span>, () =&gt; {
        it(<span class="hljs-string">'increments state.value'</span>, () =&gt; {
            view.scope.increment();
            assert.is(view.scope.state.value, <span class="hljs-number">1</span>);
            view.scope.increment();
            assert.is(view.scope.state.value, <span class="hljs-number">2</span>);
            <span class="hljs-comment">// hooray !</span>
        });
    });
});</code></pre>
<h2 id="asynchronous-test">Asynchronous test</h2>
<p>Global function <code>it</code> can provide <code>callback</code> parameter.</p>
<p>Use it to run asynchronous tests.</p>
<p>If your test fails, run <code>callback</code> parameter with an error.</p>
<p>Otherwise call it with no extra parameters.</p>
<pre><code class="hljs javascript">it(<span class="hljs-string">'callback works just fine'</span>, (callback) =&gt; {
    setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-number">1</span> + <span class="hljs-number">1</span> === <span class="hljs-number">0</span>) {
            callback(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Ops..!'</span>));
        } <span class="hljs-keyword">else</span> {
            callback();
        }
    }, <span class="hljs-number">100</span>);
});</code></pre>
<h2 id="before-and-after">Before and after</h2>
<p>Global <code>beforeEach</code> and <code>afterEach</code> function can be used to run piece of code before and after each test in <code>describe</code>.</p>
<pre><code class="hljs javascript">describe(<span class="hljs-string">'foo'</span>, () =&gt; {
    <span class="hljs-keyword">let</span> foo;

    beforeEach(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        foo = <span class="hljs-number">0</span>;
        foo += <span class="hljs-number">1</span>;
    });

    afterEach(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        foo = <span class="hljs-number">0</span>;
    });

    it(<span class="hljs-string">'is one; Mr obvious?'</span>, () =&gt; {
        assert.is(foo, <span class="hljs-number">1</span>);
    });
});</code></pre>
<h2 id="different-environments">Different environments</h2>
<p>All tests by default are running as Node server (<code>npm run node</code>).</p>
<p>By typing <code>neft test</code> you can run your tests just like client runs your application.</p>
<p>Specify <code>testing.json</code> file with list of environments you want to test.</p>
<p>YAML is supported as well, so your file can be called <code>testing.yml</code>.</p>
<p>To run your tests in Node and in a Chrome browser, specify <code>testing.json</code> as below:</p>
<pre><code class="hljs json">{
    <span class="hljs-attr">"environments"</span>: [
        {
            <span class="hljs-attr">"platform"</span>: <span class="hljs-string">"node"</span>,
            <span class="hljs-attr">"version"</span>: <span class="hljs-string">"current"</span>,
        },
        {
            <span class="hljs-attr">"platform"</span>: <span class="hljs-string">"browser"</span>,
            <span class="hljs-attr">"browser"</span>: <span class="hljs-string">"chrome"</span>
        }
    ]
}</code></pre>

    </main>
</div>
<link rel="stylesheet" type="text/css" href="/styles/highlights-github.css">
<script src="/scripts/aside.js"></script>
<script src="/scripts/svg-render.js"></script>
<script src="/scripts/search-texts.js"></script>
<script src="/scripts/elasticlunr.min.js"></script>
<script src="/scripts/search.js"></script>
